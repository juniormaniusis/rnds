(self.webpackChunkguia=self.webpackChunkguia||[]).push([[3777],{3905:function(e,a,o){"use strict";o.d(a,{Zo:function(){return c},kt:function(){return u}});var r=o(7294);function t(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function i(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,r)}return o}function n(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?i(Object(o),!0).forEach((function(a){t(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function s(e,a){if(null==e)return{};var o,r,t=function(e,a){if(null==e)return{};var o,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],a.indexOf(o)>=0||(t[o]=e[o]);return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var d=r.createContext({}),l=function(e){var a=r.useContext(d),o=a;return e&&(o="function"==typeof e?e(a):n(n({},a),e)),o},c=function(e){var a=l(e.components);return r.createElement(d.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var o=e.components,t=e.mdxType,i=e.originalType,d=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(o),u=t,f=p["".concat(d,".").concat(u)]||p[u]||m[u]||i;return o?r.createElement(f,n(n({ref:a},c),{},{components:o})):r.createElement(f,n({ref:a},c))}));function u(e,a){var o=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=o.length,n=new Array(i);n[0]=p;var s={};for(var d in a)hasOwnProperty.call(a,d)&&(s[d]=a[d]);s.originalType=e,s.mdxType="string"==typeof e?e:t,n[1]=s;for(var l=2;l<i;l++)n[l]=o[l];return r.createElement.apply(null,n)}return r.createElement.apply(null,o)}p.displayName="MDXCreateElement"},7205:function(e,a,o){"use strict";o.r(a),o.d(a,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return l},toc:function(){return c},default:function(){return p}});var r=o(2122),t=o(9756),i=(o(7294),o(3905)),n=["components"],s={id:"validacao",title:"Valida\xe7\xe3o de Recursos",sidebar_label:"Valida\xe7\xe3o"},d=void 0,l={unversionedId:"rnds/tools/validacao",id:"rnds/tools/validacao",isDocsHomePage:!1,title:"Valida\xe7\xe3o de Recursos",description:"A valida\xe7\xe3o visa assegurar que as informa\xe7\xf5es criadas e/ou recebidas est\xe3o em conformidade com os perfis nacionais, al\xe9m das exig\xeancias predefinidas pelo FHIR.",source:"@site/docs/rnds/tools/validacao.md",sourceDirName:"rnds/tools",slug:"/rnds/tools/validacao",permalink:"/rnds/docs/rnds/tools/validacao",version:"current",lastUpdatedAt:1623156865,formattedLastUpdatedAt:"6/8/2021",frontMatter:{id:"validacao",title:"Valida\xe7\xe3o de Recursos",sidebar_label:"Valida\xe7\xe3o"},sidebar:"someSidebar",previous:{title:"keytool",permalink:"/rnds/docs/rnds/tools/keytool"},next:{title:"Servidor FHIR",permalink:"/rnds/docs/rnds/tools/fhirserver"}},c=[{value:"Onde encontrar as defini\xe7\xf5es nacionais (perfis)?",id:"onde-encontrar-as-defini\xe7\xf5es-nacionais-perfis",children:[]},{value:"Recurso v\xe1lido (e outro inv\xe1lido)",id:"recurso-v\xe1lido-e-outro-inv\xe1lido",children:[]},{value:"Como validar um recurso?",id:"como-validar-um-recurso",children:[{value:"Interface gr\xe1fica",id:"interface-gr\xe1fica",children:[]},{value:"Linha de comandos",id:"linha-de-comandos",children:[]},{value:"Simplifier.Net (tamb\xe9m valida)",id:"simplifiernet-tamb\xe9m-valida",children:[]}]}],m={toc:c};function p(e){var a=e.components,s=(0,t.Z)(e,n);return(0,i.kt)("wrapper",(0,r.Z)({},m,s,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A valida\xe7\xe3o visa assegurar que as informa\xe7\xf5es criadas e/ou recebidas est\xe3o em conformidade com os perfis nacionais, al\xe9m das exig\xeancias predefinidas pelo FHIR."),(0,i.kt)("p",null,"V\xe1rios ",(0,i.kt)("a",{parentName:"p",href:"https://www.hl7.org/fhir/validation.html"},"crit\xe9rios")," podem ser considerados na valida\xe7\xe3o de recursos FHIR, como a presen\xe7a de elementos obrigat\xf3rios, a cardinalidade de cole\xe7\xf5es e outros."),(0,i.kt)("h2",{id:"onde-encontrar-as-defini\xe7\xf5es-nacionais-perfis"},"Onde encontrar as defini\xe7\xf5es nacionais (perfis)?"),(0,i.kt)("p",null,"Naturalmente, todas as defini\xe7\xf5es nacionais devem ser do conhecimento de integradores e serem empregadas nas valida\xe7\xf5es realizadas. Todas elas podem ser baixadas do ",(0,i.kt)("a",{parentName:"p",href:"https://servicos-datasus.saude.gov.br/"},"Portal de Servi\xe7os da RNDS")," ou ainda do Simplifier.Net, onde as defini\xe7\xf5es da RNDS tamb\xe9m est\xe3o ",(0,i.kt)("a",{parentName:"p",href:"https://simplifier.net/redenacionaldedadosemsaude"},"publicadas"),"."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Detalhe Simplifier.Net")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Canto superior direito, ",(0,i.kt)("em",{parentName:"p"},"Download")," e, na sequ\xeancia,\n",(0,i.kt)("em",{parentName:"p"},"Zip valid resources as XML"),". Baixe e descomprima o arquivo\nem diret\xf3rio a ser fornecido para a aplica\xe7\xe3o de valida\xe7\xe3o (comentada posteriormente)."))),(0,i.kt)("h2",{id:"recurso-v\xe1lido-e-outro-inv\xe1lido"},"Recurso v\xe1lido (e outro inv\xe1lido)"),(0,i.kt)("p",null,'Abaixo segue uma Amostra Biol\xf3gica em conformidade com as restri\xe7\xf5es nacionais. Por curiosidade, "SGHEM" \xe9 o c\xf3digo para "sangue".'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "resourceType": "Specimen",\n  "meta": {\n    "profile": [\n      "http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica-1.0"\n    ]\n  },\n  "type": {\n    "coding": [\n      {\n        "system": "http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoAmostraGAL",\n        "code": "SGHEM"\n      }\n    ]\n  }\n}\n')),(0,i.kt)("p",null,"Um laborat\xf3rio, ao construir uma Amostra Biol\xf3gica, deve observar que o Brasil restringe o uso de v\xe1rios elementos do recurso Specimen, dentre eles, ",(0,i.kt)("em",{parentName:"p"},"receivedTime"),", utilizado para registrar o instante em que a amostra foi recebida para processamento e outros, al\xe9m de ",(0,i.kt)("em",{parentName:"p"},"status"),". Isto significa que uma Amostra Biol\xf3gica, em conformidade com as especificidades nacionais, n\xe3o deve conter o instante em que a amostra foi recebida, assim como tamb\xe9m n\xe3o deve conter o elemento ",(0,i.kt)("em",{parentName:"p"},"status"),". A amostra acima satisfaz estas e outras restri\xe7\xf5es."),(0,i.kt)("p",null,"Uma Amostra Biol\xf3gica com o elemento ",(0,i.kt)("em",{parentName:"p"},"status"),", por exemplo, conforme ilustrada abaixo \xe9, portanto, uma Amostra Biol\xf3gica que n\xe3o est\xe1 em conformidade com as especificidades nacionais."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "resourceType": "Specimen",\n  "meta": {\n    "profile": [\n      "http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica-1.0"\n    ]\n  },\n  "status": "available",\n  "type": {\n    "coding": [\n      {\n        "system": "http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoAmostraGAL",\n        "code": "SGHEM"\n      }\n    ]\n  }\n}\n')),(0,i.kt)("p",null,"De fato, ao se tentar validar o recurso fornecido acima, o processo indica a presen\xe7a do elemento ",(0,i.kt)("em",{parentName:"p"},"status"),", definido para o recurso ",(0,i.kt)("em",{parentName:"p"},"Specimen")," conforme originalmente estabelecido pelo FHIR, mas exclu\xeddo pela RNDS. A mensagem retornada pelo aplicativo gr\xe1fico claramente registra esta n\xe3o conformidade:"),(0,i.kt)("p",null,"Element 'Specimen.status': max allowed = 0, but found 1\""),(0,i.kt)("h2",{id:"como-validar-um-recurso"},"Como validar um recurso?"),(0,i.kt)("p",null,"\xc9 poss\xedvel validar manualmente um recurso, sem apoio de um software. Contudo, n\xe3o \xe9 uma alternativa pr\xe1tica. Felizmente h\xe1 v\xe1rias op\xe7\xf5es, que podem ser utilizadas conforme a necessidade que se tem."),(0,i.kt)("h3",{id:"interface-gr\xe1fica"},"Interface gr\xe1fica"),(0,i.kt)("p",null,"Um aplicativo gr\xe1fico \xe9 disponibilizado pelo ",(0,i.kt)("a",{parentName:"p",href:"https://servicos-datasus.saude.gov.br/"},"Portal de Servi\xe7os da RNDS"),". Abaixo segue a tela deste aplicativo ap\xf3s a valida\xe7\xe3o de um recurso."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/1735792/92491044-21244600-f1c8-11ea-921b-541e9b77d967.png",alt:"image"})),(0,i.kt)("p",null,"No primeiro campo forne\xe7a o diret\xf3rio contendo as defini\xe7\xf5es nacionais (veja como obt\xea-las acima), depois indique a representa\xe7\xe3o do recurso a ser validado no formato JSON e, por fim, clique no bot\xe3o ",(0,i.kt)("inlineCode",{parentName:"p"},"Validar")," para que a valida\xe7\xe3o seja executada."),(0,i.kt)("h3",{id:"linha-de-comandos"},"Linha de comandos"),(0,i.kt)("p",null,"Uma alternativa \xe9 o aplicativo de linha de comandos ",(0,i.kt)("strong",{parentName:"p"},"validator_cli"),".\nDetalhes da instala\xe7\xe3o e op\xe7\xf5es dispon\xedveis est\xe3o devidamente ",(0,i.kt)("a",{parentName:"p",href:"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator"},"documentadas"),"."),(0,i.kt)("p",null,"O comando abaixo ilustra como validar o recurso representado no formato JSON e depositado no arquivo ",(0,i.kt)("strong",{parentName:"p"},"amostra.json"),", considerando as defini\xe7\xf5es contidas no diret\xf3rio ",(0,i.kt)("strong",{parentName:"p"},"d:\\definicoes"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"java -jar validador_cli.jar amostra-invalida.json -ig d:\\definicoes -recurse\n")),(0,i.kt)("p",null,"Na sa\xedda padr\xe3o ser\xe1 exibida a mensagem"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Specimen.status: max allowed = 0, but found 1\n")),(0,i.kt)("p",null,"H\xe1 muitas op\xe7\xf5es, conforme a documenta\xe7\xe3o indicada acima. Duas delas incluem ",(0,i.kt)("inlineCode",{parentName:"p"},"-output saida.json")," para depositar a sa\xedda no arquivo indicado (neste caso, ",(0,i.kt)("strong",{parentName:"p"},"saida.json"),") e ",(0,i.kt)("inlineCode",{parentName:"p"},"-version 4.0.1")," para indicar a vers\xe3o do FHIR a ser considerada no processo de valida\xe7\xe3o. Se n\xe3o fornecido, a vers\xe3o mais recente \xe9 empregada."),(0,i.kt)("p",null,"Por fim, a primeira execu\xe7\xe3o inclui a obten\xe7\xe3o de v\xe1rias defini\xe7\xf5es do FHIR, reutilizadas posteriormente e tornando o processo mais r\xe1pido."),(0,i.kt)("h3",{id:"simplifiernet-tamb\xe9m-valida"},"Simplifier.Net (tamb\xe9m valida)"),(0,i.kt)("p",null,"Al\xe9m de publicar perfis FHIR, como feito pela RNDS, voc\xea tamb\xe9m pode executar valida\xe7\xf5es diretamente no portal, pelo navegador. Esta \xe9 uma op\xe7\xe3o particularmente \xfatil para ambienta\xe7\xe3o com o FHIR e com os perfis nacionais."),(0,i.kt)("p",null,"\xc9 preciso se cadastrar no ",(0,i.kt)("a",{parentName:"p",href:"https://simplifier.net/"},"Simplifier.Net"),", felizmente, \xe9 gratuito."),(0,i.kt)("p",null,"Em sua conta, no canto superior direito encontra-se a op\xe7\xe3o ",(0,i.kt)("inlineCode",{parentName:"p"},"SNIPPET"),".\nVoc\xea pode empregar este recurso para compartilhar recursos FHIR e para validar tais recursos. Ao clicar nesta op\xe7\xe3o abre-se uma tela como aquela abaixo."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:o(7988).Z})),(0,i.kt)("p",null,"Observe que ter\xe1 que indicar a vers\xe3o, R4, e o escopo, neste caso, as defini\xe7\xf5es da Rede Nacional de Dados em Sa\xfade, conforme ilustrado.\nNeste exemplo, por simplicidade \xe9 exeperimentado o recurso Specimen e,\nem particular, o perfil nacional Amostra Biol\xf3gica. Observe que foi\nintroduzido o elemento ",(0,i.kt)("em",{parentName:"p"},"status"),", justamente para provocar um erro."),(0,i.kt)("p",null,"Pode-se ent\xe3o salvar o recurso e, na sequ\xeancia, validar (canto superior direito), o que conduz ao resultado abaixo."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:o(6897).Z})),(0,i.kt)("p",null,"Observe que pode ser retornado ao modo edi\xe7\xe3o e, se o elemento n\xe3o permitido no perfil (",(0,i.kt)("em",{parentName:"p"},"status"),") \xe9 removido, uma nova valida\xe7\xe3o resulta na imagem abaixo."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:o(8353).Z})))}p.isMDXComponent=!0},7988:function(e,a,o){"use strict";a.Z=o.p+"assets/images/snippet-amostra-invalida-6116ad230246309b7f9733da6099ef76.png"},6897:function(e,a,o){"use strict";a.Z=o.p+"assets/images/snippet-amostra-validacao-bce4210ab5d64d1f6bf30c43e03f0e22.png"},8353:function(e,a,o){"use strict";a.Z=o.p+"assets/images/snippet-validacao-sucesso-82365560bce6f91e6b9d0b0ddc231329.png"}}]);