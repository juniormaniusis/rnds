(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{142:function(e,a,o){"use strict";o.d(a,"a",(function(){return p})),o.d(a,"b",(function(){return b}));var r=o(0),t=o.n(r);function n(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function i(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?i(Object(o),!0).forEach((function(a){n(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function c(e,a){if(null==e)return{};var o,r,t=function(e,a){if(null==e)return{};var o,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],a.indexOf(o)>=0||(t[o]=e[o]);return t}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var d=t.a.createContext({}),l=function(e){var a=t.a.useContext(d),o=a;return e&&(o="function"==typeof e?e(a):s(s({},a),e)),o},p=function(e){var a=l(e.components);return t.a.createElement(d.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.a.createElement(t.a.Fragment,{},a)}},u=t.a.forwardRef((function(e,a){var o=e.components,r=e.mdxType,n=e.originalType,i=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),p=l(o),u=r,b=p["".concat(i,".").concat(u)]||p[u]||m[u]||n;return o?t.a.createElement(b,s(s({ref:a},d),{},{components:o})):t.a.createElement(b,s({ref:a},d))}));function b(e,a){var o=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=u;var s={};for(var c in a)hasOwnProperty.call(a,c)&&(s[c]=a[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<n;d++)i[d]=o[d];return t.a.createElement.apply(null,i)}return t.a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},258:function(e,a,o){"use strict";o.r(a),a.default=o.p+"assets/images/snippet-amostra-invalida-6116ad230246309b7f9733da6099ef76.png"},259:function(e,a,o){"use strict";o.r(a),a.default=o.p+"assets/images/snippet-amostra-validacao-bce4210ab5d64d1f6bf30c43e03f0e22.png"},260:function(e,a,o){"use strict";o.r(a),a.default=o.p+"assets/images/snippet-validacao-sucesso-82365560bce6f91e6b9d0b0ddc231329.png"},94:function(e,a,o){"use strict";o.r(a),o.d(a,"frontMatter",(function(){return i})),o.d(a,"metadata",(function(){return s})),o.d(a,"toc",(function(){return c})),o.d(a,"default",(function(){return l}));var r=o(3),t=o(7),n=(o(0),o(142)),i={id:"validacao",title:"Valida\xe7\xe3o de Recursos",sidebar_label:"Valida\xe7\xe3o"},s={unversionedId:"rnds/tools/validacao",id:"rnds/tools/validacao",isDocsHomePage:!1,title:"Valida\xe7\xe3o de Recursos",description:"A valida\xe7\xe3o visa assegurar que recursos criados e/ou recebidos s\xe3o v\xe1lidos. V\xe1rios crit\xe9rios podem ser considerados na valida\xe7\xe3o de recursos FHIR, como a presen\xe7a de elementos obrigat\xf3rios, a cardinalidade de cole\xe7\xf5es e outros.",source:"@site/docs\\rnds\\tools\\validacao.md",slug:"/rnds/tools/validacao",permalink:"/rnds/docs/rnds/tools/validacao",version:"current",lastUpdatedAt:1613304034,sidebar_label:"Valida\xe7\xe3o",sidebar:"someSidebar",previous:{title:"keytool",permalink:"/rnds/docs/rnds/tools/keytool"},next:{title:"Servidor FHIR",permalink:"/rnds/docs/rnds/tools/fhirserver"}},c=[{value:"Onde encontrar as defini\xe7\xf5es nacionais?",id:"onde-encontrar-as-defini\xe7\xf5es-nacionais",children:[]},{value:"Recurso v\xe1lido (e outro inv\xe1lido)",id:"recurso-v\xe1lido-e-outro-inv\xe1lido",children:[]},{value:"Como validar um recurso?",id:"como-validar-um-recurso",children:[{value:"Interface gr\xe1fica",id:"interface-gr\xe1fica",children:[]},{value:"Linha de comandos",id:"linha-de-comandos",children:[]},{value:"Simplifier.Net (tamb\xe9m valida)",id:"simplifiernet-tamb\xe9m-valida",children:[]}]}],d={toc:c};function l(e){var a=e.components,i=Object(t.a)(e,["components"]);return Object(n.b)("wrapper",Object(r.a)({},d,i,{components:a,mdxType:"MDXLayout"}),Object(n.b)("p",null,"A valida\xe7\xe3o visa assegurar que recursos criados e/ou recebidos s\xe3o v\xe1lidos. V\xe1rios ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.hl7.org/fhir/validation.html"}),"crit\xe9rios")," podem ser considerados na valida\xe7\xe3o de recursos FHIR, como a presen\xe7a de elementos obrigat\xf3rios, a cardinalidade de cole\xe7\xf5es e outros."),Object(n.b)("p",null,"Al\xe9m das exig\xeancias predefinidas pelo FHIR, tamb\xe9m \xe9 poss\xedvel validar a conformidade em rela\xe7\xe3o a perfis (que introduzem restri\xe7\xf5es para atender necessidades locais n\xe3o contempladas pelo FHIR). De fato, a RNDS estabelece dezenas de perfis (profiles), ValueSets, CodeSystems e Extensions."),Object(n.b)("h2",{id:"onde-encontrar-as-defini\xe7\xf5es-nacionais"},"Onde encontrar as defini\xe7\xf5es nacionais?"),Object(n.b)("p",null,"Naturalmente, todas as defini\xe7\xf5es nacionais devem ser do conhecimento de integradores e serem empregadas nas valida\xe7\xf5es realizadas. Todas elas podem ser baixadas do ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://servicos-datasus.saude.gov.br/"}),"Portal de Servi\xe7os da RNDS")," ou ainda do Simplifier.Net, onde as defini\xe7\xf5es da RNDS tamb\xe9m est\xe3o ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://simplifier.net/redenacionaldedadosemsaude"}),"publicadas"),"."),Object(n.b)("h2",{id:"recurso-v\xe1lido-e-outro-inv\xe1lido"},"Recurso v\xe1lido (e outro inv\xe1lido)"),Object(n.b)("p",null,'Abaixo segue uma Amostra Biol\xf3gica em conformidade com as restri\xe7\xf5es nacionais. Por curiosidade, "SGHEM" \xe9 o c\xf3digo para "sangue".'),Object(n.b)("pre",null,Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n  "resourceType": "Specimen",\n  "meta": {\n    "profile": [\n      "http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica-1.0"\n    ]\n  },\n  "type": {\n    "coding": [\n      {\n        "system": "http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoAmostraGAL",\n        "code": "SGHEM"\n      }\n    ]\n  }\n}\n')),Object(n.b)("p",null,"Um laborat\xf3rio, ao construir uma Amostra Biol\xf3gica, deve observar que o Brasil restringe o uso de v\xe1rios elementos do recurso Specimen, dentre eles, ",Object(n.b)("em",{parentName:"p"},"receivedTime"),", utilizado para registrar o instante em que a amostra foi recebida para processamento e outros, al\xe9m de ",Object(n.b)("em",{parentName:"p"},"status"),". Isto significa que uma Amostra Biol\xf3gica, em conformidade com as especificidades nacionais, n\xe3o deve conter o instante em que a amostra foi recebida, assim como tamb\xe9m n\xe3o deve conter o elemento ",Object(n.b)("em",{parentName:"p"},"status"),". A amostra acima satisfaz estas e outras restri\xe7\xf5es."),Object(n.b)("p",null,"Uma Amostra Biol\xf3gica com o elemento ",Object(n.b)("em",{parentName:"p"},"status"),", por exemplo, conforme ilustrada abaixo \xe9, portanto, uma Amostra Biol\xf3gica que n\xe3o est\xe1 em conformidade com as especificidades nacionais."),Object(n.b)("pre",null,Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n  "resourceType": "Specimen",\n  "meta": {\n    "profile": [\n      "http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica-1.0"\n    ]\n  },\n  "status": "available",\n  "type": {\n    "coding": [\n      {\n        "system": "http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoAmostraGAL",\n        "code": "SGHEM"\n      }\n    ]\n  }\n}\n')),Object(n.b)("p",null,"De fato, ao se tentar validar o recurso fornecido acima, o processo indica a presen\xe7a do elemento ",Object(n.b)("em",{parentName:"p"},"status"),", definido para o recurso ",Object(n.b)("em",{parentName:"p"},"Specimen")," conforme originalmente estabelecido pelo FHIR, mas exclu\xeddo pela RNDS. A mensagem retornada pelo aplicativo gr\xe1fico claramente registra esta n\xe3o conformidade:"),Object(n.b)("p",null,"Element 'Specimen.status': max allowed = 0, but found 1\""),Object(n.b)("h2",{id:"como-validar-um-recurso"},"Como validar um recurso?"),Object(n.b)("p",null,"\xc9 poss\xedvel validar manualmente um recurso, sem apoio de um software. Contudo, n\xe3o \xe9 uma alternativa pr\xe1tica. Felizmente h\xe1 v\xe1rias op\xe7\xf5es, que podem ser utilizadas conforme a necessidade que se tem."),Object(n.b)("h3",{id:"interface-gr\xe1fica"},"Interface gr\xe1fica"),Object(n.b)("p",null,"Um aplicativo gr\xe1fico \xe9 disponibilizado pelo ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://servicos-datasus.saude.gov.br/"}),"Portal de Servi\xe7os da RNDS"),". Abaixo segue a tela deste aplicativo ap\xf3s a valida\xe7\xe3o de um recurso."),Object(n.b)("p",null,Object(n.b)("img",Object(r.a)({parentName:"p"},{src:"https://user-images.githubusercontent.com/1735792/92491044-21244600-f1c8-11ea-921b-541e9b77d967.png",alt:"image"}))),Object(n.b)("p",null,"No primeiro campo forne\xe7a o diret\xf3rio contendo as defini\xe7\xf5es nacionais (veja como obt\xea-las acima), depois indique a representa\xe7\xe3o do recurso a ser validado no formato JSON e, por fim, clique no bot\xe3o ",Object(n.b)("inlineCode",{parentName:"p"},"Validar")," para que a valida\xe7\xe3o seja executada."),Object(n.b)("h3",{id:"linha-de-comandos"},"Linha de comandos"),Object(n.b)("p",null,"Uma alternativa \xe9 o aplicativo de linha de comandos ",Object(n.b)("strong",{parentName:"p"},"validator_cli"),".\nDetalhes da instala\xe7\xe3o e op\xe7\xf5es dispon\xedveis est\xe3o devidamente ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator"}),"documentadas"),"."),Object(n.b)("p",null,"O comando abaixo ilustra como validar o recurso representado no formato JSON e depositado no arquivo ",Object(n.b)("strong",{parentName:"p"},"amostra.json"),", considerando as defini\xe7\xf5es contidas no diret\xf3rio ",Object(n.b)("strong",{parentName:"p"},"d:\\definicoes"),"."),Object(n.b)("pre",null,Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-shell"}),"java -jar validador_cli.jar amostra-invalida.json -ig d:\\definicoes -recurse\n")),Object(n.b)("p",null,"Na sa\xedda padr\xe3o ser\xe1 exibida a mensagem"),Object(n.b)("pre",null,Object(n.b)("code",Object(r.a)({parentName:"pre"},{}),"Specimen.status: max allowed = 0, but found 1\n")),Object(n.b)("p",null,"H\xe1 muitas op\xe7\xf5es, conforme a documenta\xe7\xe3o indicada acima. Duas delas incluem ",Object(n.b)("inlineCode",{parentName:"p"},"-output saida.json")," para depositar a sa\xedda no arquivo indicado (neste caso, ",Object(n.b)("strong",{parentName:"p"},"saida.json"),") e ",Object(n.b)("inlineCode",{parentName:"p"},"-version 4.0.1")," para indicar a vers\xe3o do FHIR a ser considerada no processo de valida\xe7\xe3o. Se n\xe3o fornecido, a vers\xe3o mais recente \xe9 empregada."),Object(n.b)("p",null,"Por fim, a primeira execu\xe7\xe3o inclui a obten\xe7\xe3o de v\xe1rias defini\xe7\xf5es do FHIR, reutilizadas posteriormente e tornando o processo mais r\xe1pido."),Object(n.b)("h3",{id:"simplifiernet-tamb\xe9m-valida"},"Simplifier.Net (tamb\xe9m valida)"),Object(n.b)("p",null,"Al\xe9m de publicar perfis FHIR, como feito pela RNDS, voc\xea tamb\xe9m pode executar valida\xe7\xf5es diretamente no portal, pelo navegador. Esta \xe9 uma op\xe7\xe3o particularmente \xfatil para ambienta\xe7\xe3o com o FHIR e com os perfis nacionais."),Object(n.b)("p",null,"\xc9 preciso se cadastrar no ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://simplifier.net/"}),"Simplifier.Net"),", felizmente, \xe9 gratuito."),Object(n.b)("p",null,"Em sua conta, no canto superior direito encontra-se a op\xe7\xe3o ",Object(n.b)("inlineCode",{parentName:"p"},"SNIPPET"),".\nVoc\xea pode empregar este recurso para compartilhar recursos FHIR e para validar tais recursos. Ao clicar nesta op\xe7\xe3o abre-se uma tela como aquela abaixo."),Object(n.b)("p",null,Object(n.b)("img",{alt:"image",src:o(258).default})),Object(n.b)("p",null,"Observe que ter\xe1 que indicar a vers\xe3o, R4, e o escopo, neste caso, as defini\xe7\xf5es da Rede Nacional de Dados em Sa\xfade, conforme ilustrado.\nNeste exemplo, por simplicidade \xe9 exeperimentado o recurso Specimen e,\nem particular, o perfil nacional Amostra Biol\xf3gica. Observe que foi\nintroduzido o elemento ",Object(n.b)("em",{parentName:"p"},"status"),", justamente para provocar um erro."),Object(n.b)("p",null,"Pode-se ent\xe3o salvar o recurso e, na sequ\xeancia, validar (canto superior direito), o que conduz ao resultado abaixo."),Object(n.b)("p",null,Object(n.b)("img",{alt:"image",src:o(259).default})),Object(n.b)("p",null,"Observe que pode ser retornado ao modo edi\xe7\xe3o e, se o elemento n\xe3o permitido no perfil (",Object(n.b)("em",{parentName:"p"},"status"),") \xe9 removido, uma nova valida\xe7\xe3o resulta na imagem abaixo."),Object(n.b)("p",null,Object(n.b)("img",{alt:"image",src:o(260).default})))}l.isMDXComponent=!0}}]);